<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تخصيص الملف الشخصي - Ahmad Portfolio</title>
    <link rel="stylesheet" href="auth-style.css">
    <link rel="stylesheet" href="profile-editor-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="profile-editor-container">
        <!-- Header -->
        <header class="editor-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 data-ar="تخصيص الملف الشخصي" data-en="Profile Editor">تخصيص الملف الشخصي</h1>
                    <p data-ar="قم بتخصيص محفظة أعمالك الاحترافية" data-en="Customize your professional portfolio">قم بتخصيص محفظة أعمالك الاحترافية</p>
                </div>
                <div class="header-right">
                    <button class="language-toggle" onclick="toggleLanguage()">
                        <i class="fas fa-globe"></i>
                        <span id="lang-text">English</span>
                    </button>
                    <button class="preview-btn" onclick="previewPortfolio()">
                        <i class="fas fa-eye"></i>
                        <span data-ar="معاينة" data-en="Preview">معاينة</span>
                    </button>
                    <button class="save-btn" onclick="saveProfile()">
                        <i class="fas fa-save"></i>
                        <span data-ar="حفظ" data-en="Save">حفظ</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="editor-content">
            <!-- Sidebar Navigation -->
            <nav class="editor-sidebar">
                <div class="sidebar-menu">
                    <div class="menu-item active" data-section="personal" onclick="switchSection('personal')">
                        <i class="fas fa-user"></i>
                        <span data-ar="المعلومات الشخصية" data-en="Personal Info">المعلومات الشخصية</span>
                    </div>
                    <div class="menu-item" data-section="about" onclick="switchSection('about')">
                        <i class="fas fa-info-circle"></i>
                        <span data-ar="نبذة عني" data-en="About Me">نبذة عني</span>
                    </div>
                    <div class="menu-item" data-section="skills" onclick="switchSection('skills')">
                        <i class="fas fa-cogs"></i>
                        <span data-ar="المهارات" data-en="Skills">المهارات</span>
                    </div>
                    <div class="menu-item" data-section="experience" onclick="switchSection('experience')">
                        <i class="fas fa-briefcase"></i>
                        <span data-ar="الخبرات" data-en="Experience">الخبرات</span>
                    </div>
                    <div class="menu-item" data-section="education" onclick="switchSection('education')">
                        <i class="fas fa-graduation-cap"></i>
                        <span data-ar="التعليم" data-en="Education">التعليم</span>
                    </div>
                    <div class="menu-item" data-section="projects" onclick="switchSection('projects')">
                        <i class="fas fa-project-diagram"></i>
                        <span data-ar="المشاريع" data-en="Projects">المشاريع</span>
                    </div>
                    <div class="menu-item" data-section="contact" onclick="switchSection('contact')">
                        <i class="fas fa-envelope"></i>
                        <span data-ar="معلومات التواصل" data-en="Contact Info">معلومات التواصل</span>
                    </div>
                    <div class="menu-item" data-section="theme" onclick="switchSection('theme')">
                        <i class="fas fa-palette"></i>
                        <span data-ar="التصميم والألوان" data-en="Theme & Colors">التصميم والألوان</span>
                    </div>
                </div>
            </nav>

            <!-- Editor Sections -->
            <main class="editor-main">
                <!-- Personal Information Section -->
                <section class="editor-section active" id="personal-section">
                    <div class="section-header">
                        <h2 data-ar="المعلومات الشخصية" data-en="Personal Information">المعلومات الشخصية</h2>
                        <p data-ar="قم بتحديث معلوماتك الأساسية" data-en="Update your basic information">قم بتحديث معلوماتك الأساسية</p>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label data-ar="الصورة الشخصية" data-en="Profile Picture">الصورة الشخصية</label>
                            <div class="profile-picture-upload">
                                <div class="picture-preview">
                                    <img id="profilePicture" src="https://via.placeholder.com/150" alt="Profile">
                                    <div class="upload-overlay">
                                        <i class="fas fa-camera"></i>
                                        <span data-ar="تغيير الصورة" data-en="Change Photo">تغيير الصورة</span>
                                    </div>
                                </div>
                                <input type="file" id="profilePictureInput" accept="image/*" onchange="handleProfilePictureUpload(event)">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="fullName" data-ar="الاسم الكامل" data-en="Full Name">الاسم الكامل</label>
                            <input type="text" id="fullName" placeholder="أحمد محمد">
                        </div>

                        <div class="form-group">
                            <label for="jobTitle" data-ar="المسمى الوظيفي" data-en="Job Title">المسمى الوظيفي</label>
                            <input type="text" id="jobTitle" placeholder="مطور ويب متقدم">
                        </div>

                        <div class="form-group">
                            <label for="location" data-ar="الموقع" data-en="Location">الموقع</label>
                            <input type="text" id="location" placeholder="الرياض، المملكة العربية السعودية">
                        </div>

                        <div class="form-group">
                            <label for="birthDate" data-ar="تاريخ الميلاد" data-en="Birth Date">تاريخ الميلاد</label>
                            <input type="date" id="birthDate">
                        </div>

                        <div class="form-group">
                            <label for="nationality" data-ar="الجنسية" data-en="Nationality">الجنسية</label>
                            <input type="text" id="nationality" placeholder="سعودي">
                        </div>
                    </div>
                </section>

                <!-- About Me Section -->
                <section class="editor-section" id="about-section">
                    <div class="section-header">
                        <h2 data-ar="نبذة عني" data-en="About Me">نبذة عني</h2>
                        <p data-ar="اكتب نبذة مختصرة عن نفسك ومسيرتك المهنية" data-en="Write a brief description about yourself and your career">اكتب نبذة مختصرة عن نفسك ومسيرتك المهنية</p>
                    </div>

                    <div class="form-group">
                        <label for="aboutText" data-ar="النص" data-en="Text">النص</label>
                        <textarea id="aboutText" rows="8" placeholder="اكتب نبذة عن نفسك هنا..."></textarea>
                        <div class="character-count">
                            <span id="aboutCharCount">0</span> / 500
                        </div>
                    </div>

                    <div class="form-group">
                        <label data-ar="الاهتمامات" data-en="Interests">الاهتمامات</label>
                        <div class="tags-input">
                            <div class="tags-container" id="interestsContainer"></div>
                            <input type="text" id="interestInput" placeholder="أضف اهتماماً واضغط Enter" onkeypress="addInterest(event)">
                        </div>
                    </div>
                </section>

                <!-- Skills Section -->
                <section class="editor-section" id="skills-section">
                    <div class="section-header">
                        <h2 data-ar="المهارات" data-en="Skills">المهارات</h2>
                        <p data-ar="أضف مهاراتك مع تحديد مستوى الإتقان" data-en="Add your skills with proficiency levels">أضف مهاراتك مع تحديد مستوى الإتقان</p>
                    </div>

                    <div class="skills-manager">
                        <div class="add-skill-form">
                            <div class="form-row">
                                <input type="text" id="skillName" placeholder="اسم المهارة">
                                <select id="skillLevel">
                                    <option value="beginner" data-ar="مبتدئ" data-en="Beginner">مبتدئ</option>
                                    <option value="intermediate" data-ar="متوسط" data-en="Intermediate">متوسط</option>
                                    <option value="advanced" data-ar="متقدم" data-en="Advanced">متقدم</option>
                                    <option value="expert" data-ar="خبير" data-en="Expert">خبير</option>
                                </select>
                                <button type="button" onclick="addSkill()" data-ar="إضافة" data-en="Add">إضافة</button>
                            </div>
                        </div>

                        <div class="skills-list" id="skillsList">
                            <!-- Skills will be dynamically added here -->
                        </div>
                    </div>
                </section>

                <!-- Experience Section -->
                <section class="editor-section" id="experience-section">
                    <div class="section-header">
                        <h2 data-ar="الخبرات العملية" data-en="Work Experience">الخبرات العملية</h2>
                        <p data-ar="أضف خبراتك العملية والوظائف السابقة" data-en="Add your work experience and previous positions">أضف خبراتك العملية والوظائف السابقة</p>
                    </div>

                    <div class="experience-manager">
                        <button class="add-item-btn" onclick="addExperience()">
                            <i class="fas fa-plus"></i>
                            <span data-ar="إضافة خبرة جديدة" data-en="Add New Experience">إضافة خبرة جديدة</span>
                        </button>

                        <div class="experience-list" id="experienceList">
                            <!-- Experience items will be dynamically added here -->
                        </div>
                    </div>
                </section>

                <!-- Education Section -->
                <section class="editor-section" id="education-section">
                    <div class="section-header">
                        <h2 data-ar="التعليم" data-en="Education">التعليم</h2>
                        <p data-ar="أضف مؤهلاتك التعليمية والشهادات" data-en="Add your educational qualifications and certificates">أضف مؤهلاتك التعليمية والشهادات</p>
                    </div>

                    <div class="education-manager">
                        <button class="add-item-btn" onclick="addEducation()">
                            <i class="fas fa-plus"></i>
                            <span data-ar="إضافة مؤهل تعليمي" data-en="Add Education">إضافة مؤهل تعليمي</span>
                        </button>

                        <div class="education-list" id="educationList">
                            <!-- Education items will be dynamically added here -->
                        </div>
                    </div>
                </section>

                <!-- Projects Section -->
                <section class="editor-section" id="projects-section">
                    <div class="section-header">
                        <h2 data-ar="المشاريع" data-en="Projects">المشاريع</h2>
                        <p data-ar="عرض مشاريعك وأعمالك السابقة" data-en="Showcase your projects and previous work">عرض مشاريعك وأعمالك السابقة</p>
                    </div>

                    <div class="projects-manager">
                        <button class="add-item-btn" onclick="addProject()">
                            <i class="fas fa-plus"></i>
                            <span data-ar="إضافة مشروع جديد" data-en="Add New Project">إضافة مشروع جديد</span>
                        </button>

                        <div class="projects-list" id="projectsList">
                            <!-- Project items will be dynamically added here -->
                        </div>
                    </div>
                </section>

                <!-- Contact Section -->
                <section class="editor-section" id="contact-section">
                    <div class="section-header">
                        <h2 data-ar="معلومات التواصل" data-en="Contact Information">معلومات التواصل</h2>
                        <p data-ar="أضف طرق التواصل معك" data-en="Add your contact methods">أضف طرق التواصل معك</p>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="email" data-ar="البريد الإلكتروني" data-en="Email">البريد الإلكتروني</label>
                            <input type="email" id="email" placeholder="example@email.com">
                        </div>

                        <div class="form-group">
                            <label for="phone" data-ar="رقم الهاتف" data-en="Phone">رقم الهاتف</label>
                            <input type="tel" id="phone" placeholder="+966 50 123 4567">
                        </div>

                        <div class="form-group">
                            <label for="website" data-ar="الموقع الشخصي" data-en="Website">الموقع الشخصي</label>
                            <input type="url" id="website" placeholder="https://yourwebsite.com">
                        </div>

                        <div class="form-group">
                            <label for="linkedin" data-ar="LinkedIn" data-en="LinkedIn">LinkedIn</label>
                            <input type="url" id="linkedin" placeholder="https://linkedin.com/in/yourprofile">
                        </div>

                        <div class="form-group">
                            <label for="github" data-ar="GitHub" data-en="GitHub">GitHub</label>
                            <input type="url" id="github" placeholder="https://github.com/yourusername">
                        </div>

                        <div class="form-group">
                            <label for="twitter" data-ar="Twitter" data-en="Twitter">Twitter</label>
                            <input type="url" id="twitter" placeholder="https://twitter.com/yourusername">
                        </div>
                    </div>
                </section>

                <!-- Theme Section -->
                <section class="editor-section" id="theme-section">
                    <div class="section-header">
                        <h2 data-ar="التصميم والألوان" data-en="Theme & Colors">التصميم والألوان</h2>
                        <p data-ar="خصص مظهر محفظتك" data-en="Customize your portfolio appearance">خصص مظهر محفظتك</p>
                    </div>

                    <div class="theme-options">
                        <div class="form-group">
                            <label data-ar="اللون الأساسي" data-en="Primary Color">اللون الأساسي</label>
                            <div class="color-picker">
                                <input type="color" id="primaryColor" value="#3b82f6">
                                <span class="color-value">#3b82f6</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label data-ar="اللون الثانوي" data-en="Secondary Color">اللون الثانوي</label>
                            <div class="color-picker">
                                <input type="color" id="secondaryColor" value="#64748b">
                                <span class="color-value">#64748b</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label data-ar="نمط التصميم" data-en="Design Style">نمط التصميم</label>
                            <div class="theme-selector">
                                <div class="theme-option active" data-theme="modern">
                                    <div class="theme-preview modern-preview"></div>
                                    <span data-ar="عصري" data-en="Modern">عصري</span>
                                </div>
                                <div class="theme-option" data-theme="classic">
                                    <div class="theme-preview classic-preview"></div>
                                    <span data-ar="كلاسيكي" data-en="Classic">كلاسيكي</span>
                                </div>
                                <div class="theme-option" data-theme="minimal">
                                    <div class="theme-preview minimal-preview"></div>
                                    <span data-ar="بسيط" data-en="Minimal">بسيط</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Floating Action Buttons -->
        <div class="floating-actions">
            <button class="floating-fab save-fab" onclick="saveProfile()" title="حفظ التغييرات">
                <i class="fas fa-save"></i>
            </button>
            <button class="floating-fab preview-fab" onclick="previewPortfolio()" title="معاينة المحفظة">
                <i class="fas fa-eye"></i>
            </button>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-toast" id="successToast">
        <i class="fas fa-check-circle"></i>
        <span data-ar="تم حفظ التغييرات بنجاح!" data-en="Changes saved successfully!">تم حفظ التغييرات بنجاح!</span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p data-ar="جاري الحفظ..." data-en="Saving...">جاري الحفظ...</p>
        </div>
    </div>

    <script src="auth-script.js"></script>
    <script src="profile-editor-script.js"></script>
    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeProfileEditor();
            checkSavedLanguage();
            loadUserData();
        });

        // Initialize profile editor
        function initializeProfileEditor() {
            // Check if user is logged in
            if (!localStorage.getItem('isLoggedIn')) {
                window.location.href = 'login.html';
                return;
            }

            // Setup character counter for about text
            const aboutText = document.getElementById('aboutText');
            const charCount = document.getElementById('aboutCharCount');
            
            aboutText.addEventListener('input', function() {
                const count = this.value.length;
                charCount.textContent = count;
                
                if (count > 500) {
                    charCount.style.color = '#ef4444';
                } else {
                    charCount.style.color = '#64748b';
                }
            });

            // Setup color pickers
            setupColorPickers();
            
            // Setup theme selector
            setupThemeSelector();
        }

        // Load user data
        function loadUserData() {
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            
            // Populate form fields
            if (userData.firstName && userData.lastName) {
                document.getElementById('fullName').value = userData.firstName + ' ' + userData.lastName;
            }
            if (userData.email) {
                document.getElementById('email').value = userData.email;
            }
            if (userData.phone) {
                document.getElementById('phone').value = userData.phone;
            }
            if (userData.profession) {
                document.getElementById('jobTitle').value = userData.profession;
            }
        }



        // Handle profile picture upload
        function handleProfilePictureUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profilePicture').src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        // Add interest tag
        function addInterest(event) {
            if (event.key === 'Enter' && event.target.value.trim()) {
                const container = document.getElementById('interestsContainer');
                const tag = document.createElement('div');
                tag.className = 'tag';
                tag.innerHTML = `
                    <span>${event.target.value.trim()}</span>
                    <button type="button" onclick="removeTag(this)">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(tag);
                event.target.value = '';
            }
        }

        // Remove tag
        function removeTag(button) {
            button.parentElement.remove();
        }

        // Add skill
        function addSkill() {
            const skillName = document.getElementById('skillName').value.trim();
            const skillLevel = document.getElementById('skillLevel').value;
            
            if (!skillName) return;
            
            const skillsList = document.getElementById('skillsList');
            const skillItem = document.createElement('div');
            skillItem.className = 'skill-item';
            skillItem.innerHTML = `
                <div class="skill-info">
                    <span class="skill-name">${skillName}</span>
                    <span class="skill-level ${skillLevel}">${document.getElementById('skillLevel').selectedOptions[0].textContent}</span>
                </div>
                <div class="skill-progress">
                    <div class="progress-bar">
                        <div class="progress-fill ${skillLevel}"></div>
                    </div>
                </div>
                <button class="remove-btn" onclick="removeSkill(this)">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            
            skillsList.appendChild(skillItem);
            
            // Clear form
            document.getElementById('skillName').value = '';
            document.getElementById('skillLevel').selectedIndex = 0;
        }

        // Remove skill
        function removeSkill(button) {
            button.parentElement.remove();
        }

        // Add experience
        function addExperience() {
            const experienceList = document.getElementById('experienceList');
            const experienceItem = document.createElement('div');
            experienceItem.className = 'experience-item';
            experienceItem.innerHTML = `
                <div class="item-header">
                    <h4 data-ar="خبرة جديدة" data-en="New Experience">خبرة جديدة</h4>
                    <button class="remove-btn" onclick="removeItem(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label data-ar="المسمى الوظيفي" data-en="Job Title">المسمى الوظيفي</label>
                        <input type="text" placeholder="مطور ويب">
                    </div>
                    <div class="form-group">
                        <label data-ar="اسم الشركة" data-en="Company Name">اسم الشركة</label>
                        <input type="text" placeholder="شركة التقنية">
                    </div>
                    <div class="form-group">
                        <label data-ar="تاريخ البداية" data-en="Start Date">تاريخ البداية</label>
                        <input type="date">
                    </div>
                    <div class="form-group">
                        <label data-ar="تاريخ النهاية" data-en="End Date">تاريخ النهاية</label>
                        <input type="date">
                    </div>
                    <div class="form-group full-width">
                        <label data-ar="الوصف" data-en="Description">الوصف</label>
                        <textarea rows="3" placeholder="وصف المهام والإنجازات..."></textarea>
                    </div>
                </div>
            `;
            
            experienceList.appendChild(experienceItem);
        }

        // Add education
        function addEducation() {
            const educationList = document.getElementById('educationList');
            const educationItem = document.createElement('div');
            educationItem.className = 'education-item';
            educationItem.innerHTML = `
                <div class="item-header">
                    <h4 data-ar="مؤهل تعليمي جديد" data-en="New Education">مؤهل تعليمي جديد</h4>
                    <button class="remove-btn" onclick="removeItem(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label data-ar="الدرجة العلمية" data-en="Degree">الدرجة العلمية</label>
                        <input type="text" placeholder="بكالوريوس علوم الحاسب">
                    </div>
                    <div class="form-group">
                        <label data-ar="اسم المؤسسة" data-en="Institution">اسم المؤسسة</label>
                        <input type="text" placeholder="جامعة الملك سعود">
                    </div>
                    <div class="form-group">
                        <label data-ar="سنة التخرج" data-en="Graduation Year">سنة التخرج</label>
                        <input type="number" min="1950" max="2030" placeholder="2023">
                    </div>
                    <div class="form-group">
                        <label data-ar="المعدل التراكمي" data-en="GPA">المعدل التراكمي</label>
                        <input type="text" placeholder="3.8/4.0">
                    </div>
                </div>
            `;
            
            educationList.appendChild(educationItem);
        }

        // Add project
        function addProject() {
            const projectsList = document.getElementById('projectsList');
            const projectItem = document.createElement('div');
            projectItem.className = 'project-item';
            projectItem.innerHTML = `
                <div class="item-header">
                    <h4 data-ar="مشروع جديد" data-en="New Project">مشروع جديد</h4>
                    <button class="remove-btn" onclick="removeItem(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label data-ar="اسم المشروع" data-en="Project Name">اسم المشروع</label>
                        <input type="text" placeholder="تطبيق إدارة المهام">
                    </div>
                    <div class="form-group">
                        <label data-ar="التقنيات المستخدمة" data-en="Technologies">التقنيات المستخدمة</label>
                        <input type="text" placeholder="React, Node.js, MongoDB">
                    </div>
                    <div class="form-group">
                        <label data-ar="رابط المشروع" data-en="Project URL">رابط المشروع</label>
                        <input type="url" placeholder="https://github.com/username/project">
                    </div>
                    <div class="form-group">
                        <label data-ar="رابط العرض المباشر" data-en="Live Demo">رابط العرض المباشر</label>
                        <input type="url" placeholder="https://project-demo.com">
                    </div>
                    <div class="form-group full-width">
                        <label data-ar="وصف المشروع" data-en="Project Description">وصف المشروع</label>
                        <textarea rows="3" placeholder="وصف مفصل عن المشروع وأهدافه..."></textarea>
                    </div>
                </div>
            `;
            
            projectsList.appendChild(projectItem);
        }

        // Remove item
        function removeItem(button) {
            button.closest('.experience-item, .education-item, .project-item').remove();
        }

        // Setup color pickers
        function setupColorPickers() {
            const colorInputs = document.querySelectorAll('input[type="color"]');
            colorInputs.forEach(input => {
                input.addEventListener('change', function() {
                    this.nextElementSibling.textContent = this.value;
                });
            });
        }

        // Setup theme selector
        function setupThemeSelector() {
            const themeOptions = document.querySelectorAll('.theme-option');
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }


    </script>
    <script src="profile-editor-script.js"></script>
</body>
</html>